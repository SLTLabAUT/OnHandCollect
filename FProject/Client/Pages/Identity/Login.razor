@page "/identity/login"

<AuthorizeView>
    <NotAuthorized Context="Auth">
        <IdentityTemplate Title="ورود">
            <EditForm EditContext=EditContext OnValidSubmit=LoginHandler>
                <DataAnnotationsValidator />
                <BFUValidationSummary />
                @if (EmailNotConfirmed)
                {
                    <BFUMessageBar MessageBarType="MessageBarType.Error" IsMultiline="false" OnDismiss="DismissMessagebarHandler">
                        <Actions>
                            <BFUMessageBarButton Text="درخواست دوباره‌ی لینک تایید رایانامه" Href="/identity/resendconfirmationemail" />
                        </Actions>
                        <ChildContent>
                            رایانامه‌ی شما تایید نشده است. لطفا اقدام به تایید آن نمایید.
                        </ChildContent>
                    </BFUMessageBar>
                }
                <BFUTextField Label=@(Utils.GetDisplayName<LoginDTO>(m => m.Email)) @bind-Value=@LoginDTO.Email ValidateOnLoad=false ValidateOnFocusOut=true ValidateOnFocusIn=true />
                <BFUTextField Label=@(Utils.GetDisplayName<LoginDTO>(m => m.Password)) InputType=@InputType.Password @bind-Value=@LoginDTO.Password ValidateOnLoad=false ValidateOnFocusOut=true ValidateOnFocusIn=true />
                <MyBFUCheckbox Label=@(Utils.GetDisplayName<LoginDTO, bool>(m => m.RememberMe)) @bind-Checked=@LoginDTO.RememberMe />
                <BFUStack HorizontalAlign=Alignment.Center VerticalAlign=Alignment.Center Tokens=@(new BFUStackTokens { ChildrenGap = new double[] { 10 } })>
                    <BFUStackItem Align=Alignment.Center>
                        <BFUSubmitButton Text="ورود" />
                    </BFUStackItem>
                    <BFUStackItem Align=Alignment.Center>
                        <BFULink Href="/identity/forgotpassword">فراموشی رمز عبور</BFULink>
                    </BFUStackItem>
                </BFUStack>
            </EditForm>
        </IdentityTemplate>
    </NotAuthorized>
    <Authorized>
        @{
            NavigateToReturnUrl();
        }
    </Authorized>
</AuthorizeView>
